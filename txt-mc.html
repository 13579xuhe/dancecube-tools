<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TXTè½¬MCè½¬æ¢å™¨</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        :root {
            --primary-color: #4a6bff;
            --primary-light: #6d8aff;
            --primary-dark: #3a56d4;
            --secondary-color: #ff6b9d;
            --success-color: #00c853;
            --warning-color: #ff9800;
            --danger-color: #ff4757;
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --card-border: #2d4059;
            --text-primary: #ffffff;
            --text-secondary: #b0b7c3;
            --text-muted: #8a94a6;
            --input-bg: #0f3460;
            --input-border: #2d4059;
            --input-focus: #4a6bff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, var(--bg-color) 0%, #0f3460 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            border-radius: 2px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-with-icon {
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            background: var(--input-bg);
            border: 2px solid var(--input-border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 107, 255, 0.1);
        }

        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* ç¾åŒ–åçš„æ–‡ä»¶ä¸Šä¼ æ ·å¼ */
        .file-upload-container {
            margin-bottom: 25px;
        }

        .file-upload-label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 12px;
            font-weight: 500;
            font-size: 1rem;
        }

        .file-upload {
            position: relative;
        }

        .file-input {
            width: 100%;
            opacity: 0;
            position: absolute;
            z-index: 2;
            cursor: pointer;
            height: 140px;
        }

        .upload-area {
            width: 100%;
            height: 140px;
            border: 3px dashed var(--input-border);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: rgba(15, 52, 96, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(74, 107, 255, 0.1);
            transform: translateY(-2px);
        }

        .upload-area.active {
            border-color: var(--success-color);
            background: rgba(0, 200, 83, 0.1);
        }

        .upload-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .upload-icon.txt {
            color: #ff9f43;
        }

        .upload-icon.audio {
            color: #00d2d3;
        }

        .upload-icon.image {
            color: #ff6b9d;
        }

        .upload-text {
            color: var(--text-primary);
            font-weight: 500;
            font-size: 1.1rem;
            margin-bottom: 5px;
            text-align: center;
        }

        .upload-subtext {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-align: center;
        }

        .upload-details {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 15px;
            border-bottom-left-radius: 9px;
            border-bottom-right-radius: 9px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .upload-area:hover .upload-details {
            transform: translateY(0);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(74, 107, 255, 0.15) 0%, rgba(255, 107, 157, 0.1) 100%);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .file-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(74, 107, 255, 0.2);
            border-radius: 8px;
            font-size: 1.2rem;
        }

        .file-icon.txt {
            background: rgba(255, 159, 67, 0.2);
            color: #ff9f43;
        }

        .file-icon.audio {
            background: rgba(0, 210, 211, 0.2);
            color: #00d2d3;
        }

        .file-icon.image {
            background: rgba(255, 107, 157, 0.2);
            color: #ff6b9d;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 3px;
        }

        .file-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
        }

        .file-size {
            color: var(--text-muted);
        }

        .file-type {
            color: var(--primary-color);
            font-weight: 500;
        }

        .file-remove {
            background: rgba(255, 71, 87, 0.1);
            border: none;
            color: var(--danger-color);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .file-remove:hover {
            background: rgba(255, 71, 87, 0.2);
            transform: scale(1.1);
        }

        .offset-card {
            background: linear-gradient(135deg, var(--card-bg) 0%, #0f3460 100%);
            border: 1px solid var(--primary-light);
        }

        .offset-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin: 20px 0;
        }

        .offset-details {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .offset-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .offset-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 107, 255, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color) 0%, #00b248 100%);
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 200, 83, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid var(--input-border);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--primary-color);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .preview-section {
            margin-top: 40px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 10px 20px;
            background: var(--card-bg);
            border-radius: 8px;
            min-width: 120px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .notes-preview {
            background: var(--input-bg);
            border-radius: 8px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .note-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid var(--primary-color);
        }

        .note-column {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-color);
            border-radius: 8px;
            margin-right: 15px;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .note-info {
            flex: 1;
        }

        .note-beat {
            color: var(--text-secondary);
            font-family: 'Consolas', monospace;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .info-box {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1) 0%, rgba(74, 107, 255, 0.1) 100%);
            border: 1px solid rgba(255, 107, 157, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .info-title {
            color: var(--secondary-color);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .info-text {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .files-list {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .file-list-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .file-list-item:last-child {
            border-bottom: none;
        }

        .file-list-icon {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .progress-container {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            display: none;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--input-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--input-bg);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* è‡ªå®šä¹‰å›¾æ ‡ */
        .custom-icon {
            font-size: 24px;
            line-height: 1;
        }

        /* æ–‡ä»¶ç±»å‹é¢œè‰² */
        .txt-color { color: #ff9f43; }
        .audio-color { color: #00d2d3; }
        .image-color { color: #ff6b9d; }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
<div id="app">
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header fade-in">
            <h1 class="title">TXTè½¬MCè½¬æ¢å™¨</h1>
            <p class="subtitle">æ™ºèƒ½è½¬æ¢ï¼Œç²¾å‡†åç§»ï¼Œä¸€é”®æ‰“åŒ….mczæ–‡ä»¶</p>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å·¦ä¾§ï¼šè®¾ç½®é¢æ¿ -->
            <div class="settings-section">
                <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
                <div class="card fade-in" style="animation-delay: 0.1s;">
                    <div class="card-title">
                        <span class="material-icons txt-color">info</span>
                        åŸºæœ¬ä¿¡æ¯
                    </div>

                    <div class="input-group">
                        <label class="input-label">ä½œè€…</label>
                        <div class="input-with-icon">
                            <input v-model="creator" type="text" class="input-field" placeholder="è¾“å…¥ä½œè€…å">
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">æ­Œæ›²æ ‡é¢˜</label>
                        <div class="input-with-icon">
                            <input v-model="title" type="text" class="input-field" placeholder="æ­Œæ›²æ ‡é¢˜ï¼ˆå°†ä½œä¸º.mczæ–‡ä»¶åï¼‰">
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">è‰ºæœ¯å®¶</label>
                        <div class="input-with-icon">
                            <input v-model="artist" type="text" class="input-field" placeholder="è‰ºæœ¯å®¶å">
                        </div>
                    </div>
                </div>

                <!-- æ–‡ä»¶ä¸Šä¼ å¡ç‰‡ -->
                <div class="card fade-in" style="animation-delay: 0.2s;">
                    <div class="card-title">
                        <span class="material-icons txt-color">cloud_upload</span>
                        æ–‡ä»¶ä¸Šä¼ 
                    </div>

                    <!-- è°±é¢æ–‡ä»¶ä¸Šä¼  -->
                    <div class="file-upload-container">
                        <label class="file-upload-label">ğŸ“ è°±é¢æ–‡ä»¶ (TXT)</label>
                        <div class="file-upload">
                            <input type="file" @change="uploadTxtFile" accept=".txt" class="file-input" id="txt-file-input">
                            <label for="txt-file-input" class="upload-area" :class="{ active: uploadedFiles.txt }">
                                <span class="material-icons upload-icon txt">description</span>
                                <span class="upload-text" v-if="!uploadedFiles.txt">ç‚¹å‡»ä¸Šä¼ TXTè°±é¢æ–‡ä»¶</span>
                                <span class="upload-text" v-else>{{ fileName }}.txt</span>
                                <span class="upload-subtext">æ”¯æŒ .txt æ ¼å¼</span>
                                <div class="upload-details">
                                    <span>è°±é¢æ–‡ä»¶</span>
                                    <span v-if="txtFileSize">{{ txtFileSize }}</span>
                                </div>
                            </label>
                        </div>
                        <div class="file-info" v-if="uploadedFiles.txt">
                            <div class="file-icon txt">
                                <span class="material-icons">description</span>
                            </div>
                            <div class="file-details">
                                <div class="file-name">{{ fileName }}.txt</div>
                                <div class="file-meta">
                                    <span class="file-size">{{ txtFileSize }}</span>
                                    <span class="file-type">TXTè°±é¢æ–‡ä»¶</span>
                                </div>
                            </div>
                            <button class="file-remove" @click="removeFile('txt')" title="ç§»é™¤æ–‡ä»¶">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                    </div>

                    <!-- éŸ³é¢‘æ–‡ä»¶ä¸Šä¼  -->
                    <div class="file-upload-container">
                        <label class="file-upload-label">ğŸµ éŸ³é¢‘æ–‡ä»¶</label>
                        <div class="file-upload">
                            <input type="file" @change="uploadAudio" accept=".ogg,.mp3,.wav,.flac" class="file-input" id="audio-file-input">
                            <label for="audio-file-input" class="upload-area" :class="{ active: uploadedFiles.audio }">
                                <span class="material-icons upload-icon audio">music_note</span>
                                <span class="upload-text" v-if="!uploadedFiles.audio">ç‚¹å‡»ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</span>
                                <span class="upload-text" v-else>{{ audioFileName }}</span>
                                <span class="upload-subtext">æ”¯æŒ .ogg .mp3 .wav .flac æ ¼å¼</span>
                                <div class="upload-details">
                                    <span>éŸ³é¢‘æ–‡ä»¶</span>
                                    <span v-if="audioFileSize">{{ audioFileSize }}</span>
                                </div>
                            </label>
                        </div>
                        <div class="file-info" v-if="uploadedFiles.audio">
                            <div class="file-icon audio">
                                <span class="material-icons">audiotrack</span>
                            </div>
                            <div class="file-details">
                                <div class="file-name">{{ audioFileName }}</div>
                                <div class="file-meta">
                                    <span class="file-size">{{ audioFileSize }}</span>
                                    <span class="file-type">{{ getFileExtension(audioFileName) }} éŸ³é¢‘æ–‡ä»¶</span>
                                </div>
                            </div>
                            <button class="file-remove" @click="removeFile('audio')" title="ç§»é™¤æ–‡ä»¶">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                    </div>

                    <!-- èƒŒæ™¯å›¾ç‰‡ä¸Šä¼  -->
                    <div class="file-upload-container">
                        <label class="file-upload-label">ğŸ–¼ï¸ èƒŒæ™¯å›¾ç‰‡</label>
                        <div class="file-upload">
                            <input type="file" @change="uploadBackground" accept=".jpg,.jpeg,.png,.bmp" class="file-input" id="bg-file-input">
                            <label for="bg-file-input" class="upload-area" :class="{ active: uploadedFiles.background }">
                                <span class="material-icons upload-icon image">image</span>
                                <span class="upload-text" v-if="!uploadedFiles.background">ç‚¹å‡»ä¸Šä¼ èƒŒæ™¯å›¾ç‰‡</span>
                                <span class="upload-text" v-else>{{ backgroundFileName }}</span>
                                <span class="upload-subtext">æ”¯æŒ .jpg .png .bmp æ ¼å¼</span>
                                <div class="upload-details">
                                    <span>èƒŒæ™¯å›¾ç‰‡</span>
                                    <span v-if="backgroundFileSize">{{ backgroundFileSize }}</span>
                                </div>
                            </label>
                        </div>
                        <div class="file-info" v-if="uploadedFiles.background">
                            <div class="file-icon image">
                                <span class="material-icons">wallpaper</span>
                            </div>
                            <div class="file-details">
                                <div class="file-name">{{ backgroundFileName }}</div>
                                <div class="file-meta">
                                    <span class="file-size">{{ backgroundFileSize }}</span>
                                    <span class="file-type">{{ getFileExtension(backgroundFileName) }} å›¾ç‰‡æ–‡ä»¶</span>
                                </div>
                            </div>
                            <button class="file-remove" @click="removeFile('background')" title="ç§»é™¤æ–‡ä»¶">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šå‚æ•°è®¾ç½® -->
            <div class="settings-section">
                <!-- æ—¶é—´å‚æ•°å¡ç‰‡ -->
                <div class="card fade-in" style="animation-delay: 0.3s;">
                    <div class="card-title">
                        <span class="material-icons audio-color">schedule</span>
                        æ—¶é—´å‚æ•°
                    </div>

                    <div class="input-group">
                        <label class="input-label">ğŸ¯ BPM (é€Ÿåº¦)</label>
                        <div class="input-with-icon">
                            <input v-model="bpm" type="number" step="0.1" class="input-field" placeholder="ä¾‹å¦‚ï¼š120">
                            <span class="input-icon">BPM</span>
                        </div>
                        <div class="upload-subtext">æ¯åˆ†é’Ÿæ‹æ•°ï¼Œå†³å®šæ­Œæ›²é€Ÿåº¦</div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">â° éŸ³é¢‘èµ·å§‹æ—¶é—´</label>
                        <div class="input-with-icon">
                            <input v-model="audioStartTime" type="number" step="0.001" class="input-field" placeholder="ä¾‹å¦‚ï¼š0.000">
                            <span class="input-icon">ç§’</span>
                        </div>
                        <div class="upload-subtext">éŸ³é¢‘æ–‡ä»¶ä¸­ç¬¬å‡ ç§’å¼€å§‹æœ‰éŸ³ä¹</div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">ğŸ“ ç¬¬ä¸€ä¸ªéŸ³ç¬¦èŠ‚æ‹ä½ç½®</label>
                        <div class="input-with-icon">
                            <input v-model="firstNoteBeat" type="number" step="1" min="0" class="input-field" placeholder="ä¾‹å¦‚ï¼š0">
                            <span class="input-icon">æ‹</span>
                        </div>
                        <div class="upload-subtext">è°±é¢ä¸­ç¬¬ä¸€ä¸ªéŸ³ç¬¦åœ¨ç¬¬å‡ æ‹å‡ºç°</div>
                    </div>
                </div>

                <!-- åç§»é‡è®¡ç®—å¡ç‰‡ -->
                <div class="card offset-card fade-in" style="animation-delay: 0.4s;">
                    <div class="card-title">
                        <span class="material-icons" style="color: var(--secondary-color);">calculate</span>
                        æ™ºèƒ½åç§»è®¡ç®—
                    </div>

                    <div class="offset-value pulse">
                        {{ calculatedOffset }} ms
                    </div>

                    <div class="offset-details">
                        <div class="offset-item">
                            <span>éŸ³é¢‘èµ·å§‹æ—¶é—´</span>
                            <span>{{ audioStartTime }} ç§’</span>
                        </div>
                        <div class="offset-item">
                            <span>BPM</span>
                            <span>{{ bpm }}</span>
                        </div>
                        <div class="offset-item">
                            <span>æ¯æ‹æ—¶é•¿</span>
                            <span>{{ beatDurationMs.toFixed(1) }} ms</span>
                        </div>
                        <div class="offset-item">
                            <span>ç¬¬ä¸€ä¸ªéŸ³ç¬¦èŠ‚æ‹</span>
                            <span>{{ firstNoteBeat }}</span>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="info-title">ğŸ“Š åç§»é‡è®¡ç®—å…¬å¼</div>
                        <div class="info-text">
                            <strong>åç§»é‡ = éŸ³é¢‘èµ·å§‹æ—¶é—´ - (ç¬¬ä¸€ä¸ªéŸ³ç¬¦èŠ‚æ‹ Ã— æ¯æ‹æ—¶é•¿)</strong>
                            <br><br>
                            <small>ğŸ’¡ å¦‚æœæ¸¸æˆä¸­éŸ³ç¬¦æ—¶é—´ä¸å‡†ï¼š</small><br>
                            <small>â€¢ éŸ³ç¬¦å‡ºç°å¤ªæ—© â†’ å¢åŠ éŸ³é¢‘èµ·å§‹æ—¶é—´</small><br>
                            <small>â€¢ éŸ³ç¬¦å‡ºç°å¤ªæ™š â†’ å‡å°‘éŸ³é¢‘èµ·å§‹æ—¶é—´</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="button-group fade-in" style="animation-delay: 0.5s;">
            <button class="btn btn-primary" @click="downloadMcFile" :disabled="!isValidForDownload">
                <span class="material-icons">download</span>
                å•ç‹¬ä¸‹è½½MCæ–‡ä»¶
            </button>
            <button class="btn btn-success" @click="packageMcFile" :disabled="!isValidForPackage">
                <span class="material-icons">archive</span>
                æ‰“åŒ…ä¸ºMCZæ–‡ä»¶
            </button>
            <button class="btn btn-secondary" @click="resetAll">
                <span class="material-icons">restart_alt</span>
                é‡ç½®æ‰€æœ‰
            </button>
        </div>

        <!-- æ‰“åŒ…è¿›åº¦ -->
        <div class="progress-container fade-in" :class="{ active: isPackaging }" style="animation-delay: 0.6s;">
            <div class="card">
                <div class="card-title">
                    <span class="material-icons">hourglass_full</span>
                    æ­£åœ¨æ‰“åŒ…MCZæ–‡ä»¶...
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" :style="{ width: packagingProgress + '%' }"></div>
                </div>
                <div class="progress-text">
                    {{ packagingStatus }}
                </div>
            </div>
        </div>

        <!-- é¢„è§ˆåŒºåŸŸ -->
        <div class="preview-section fade-in" style="animation-delay: 0.7s;" v-if="content.length > 0">
            <div class="card">
                <div class="preview-header">
                    <div class="card-title">
                        <span class="material-icons txt-color">preview</span>
                        è°±é¢é¢„è§ˆä¸æ‰“åŒ…ä¿¡æ¯
                        <span v-if="fileName" class="upload-subtext" style="margin-left: auto; font-size: 0.9rem;">
                                æ–‡ä»¶: {{ fileName }}.txt
                            </span>
                    </div>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value">{{ content.length }}</div>
                            <div class="stat-label">éŸ³ç¬¦æ€»æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">{{ effectList.length }}</div>
                            <div class="stat-label">å˜é€Ÿæ•ˆæœ</div>
                        </div>
                    </div>
                </div>

                <div class="notes-preview">
                    <div v-if="content.length > 0">
                        <div class="note-item" v-for="(note, index) in content.slice(0, 20)" :key="index">
                            <div class="note-column">
                                {{ note.column + 1 }}
                            </div>
                            <div class="note-info">
                                <div>æ‹å­: <span class="note-beat">{{ note.beat.join('/') }}</span></div>
                                <div v-if="note.endbeat" style="font-size: 0.9rem; color: var(--text-muted);">
                                    é•¿æŒ‰ç»“æŸ: <span class="note-beat">{{ note.endbeat.join('/') }}</span>
                                </div>
                            </div>
                        </div>
                        <div v-if="content.length > 20" class="empty-state">
                            <span class="material-icons">more_horiz</span>
                            <div>è¿˜æœ‰ {{ content.length - 20 }} ä¸ªéŸ³ç¬¦æœªæ˜¾ç¤º...</div>
                        </div>
                    </div>
                    <div v-else class="empty-state">
                        <div class="material-icons" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;">music_note</div>
                        <div>è¯·ä¸Šä¼ TXTè°±é¢æ–‡ä»¶æŸ¥çœ‹é¢„è§ˆ</div>
                    </div>
                </div>

                <div class="files-list">
                    <div class="info-title">ğŸ“¦ æ‰“åŒ…æ–‡ä»¶æ¸…å•</div>
                    <div v-if="uploadedFiles.txt" class="file-list-item">
                        <span class="material-icons file-list-icon txt-color">description</span>
                        <span>è°±é¢æ–‡ä»¶: {{ fileName }}.txt</span>
                    </div>
                    <div v-if="uploadedFiles.audio" class="file-list-item">
                        <span class="material-icons file-list-icon audio-color">audiotrack</span>
                        <span>éŸ³é¢‘æ–‡ä»¶: {{ audioFileName }}</span>
                    </div>
                    <div v-if="uploadedFiles.background" class="file-list-item">
                        <span class="material-icons file-list-icon image-color">image</span>
                        <span>èƒŒæ™¯å›¾ç‰‡: {{ backgroundFileName }}</span>
                    </div>
                    <div class="file-list-item">
                        <span class="material-icons file-list-icon">code</span>
                        <span>è°±é¢é…ç½®: {{ (title || fileName) + '.mc' }}</span>
                    </div>
                    <div v-if="isValidForPackage" class="file-list-item" style="border-top: 2px solid var(--success-color); margin-top: 10px; padding-top: 10px;">
                        <span class="material-icons file-list-icon" style="color: var(--success-color);">archive</span>
                        <strong>æ‰“åŒ…æ–‡ä»¶: {{ (title || fileName) + '.mcz' }}</strong>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-title">ğŸ® ä½¿ç”¨æç¤º</div>
                    <div class="info-text">
                        1. è¯·ç¡®ä¿æ‰€æœ‰æ–‡ä»¶å·²æ­£ç¡®ä¸Šä¼ <br>
                        2. æ£€æŸ¥åç§»é‡è®¡ç®—ç»“æœæ˜¯å¦åˆç†<br>
                        3. ç‚¹å‡»"æ‰“åŒ…ä¸ºMCZæ–‡ä»¶"ç”Ÿæˆå®Œæ•´è°±é¢åŒ…<br>
                        4. .mczæ–‡ä»¶å¯ç›´æ¥å¯¼å…¥Malodyç­‰éŸ³æ¸¸<br>
                        5. å¦‚éœ€è°ƒæ•´ï¼Œä¿®æ”¹å‚æ•°åé‡æ–°æ‰“åŒ…
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    new Vue({
        el: '#app',
        data() {
            return {
                fileName: "",
                txtFileSize: "",
                bpm: "120",
                creator: "",
                background: "",
                backgroundFile: null,
                backgroundFileName: "",
                backgroundFileSize: "",
                audioStartTime: "0",
                firstNoteBeat: "0",
                sound: "",
                audioFile: null,
                audioFileName: "",
                audioFileSize: "",
                title: "",
                artist: "Unknown",
                content: [],
                effectList: [],
                originalContent: [],
                originalEffectList: [],
                originalBeats: [],
                mcData: {},
                uploadedFiles: {
                    background: null,
                    audio: null,
                    txt: null
                },
                isPackaging: false,
                packagingProgress: 0,
                packagingStatus: ""
            };
        },
        computed: {
            beatDurationMs() {
                if (!this.bpm || isNaN(parseFloat(this.bpm)) || parseFloat(this.bpm) <= 0) {
                    return 500;
                }
                return 60000 / parseFloat(this.bpm);
            },

            calculatedOffset() {
                const audioStartMs = parseFloat(this.audioStartTime || 0) * 1000;
                const firstBeat = parseInt(this.firstNoteBeat || 0);
                const firstNoteTime = firstBeat * this.beatDurationMs;
                let offset = audioStartMs - firstNoteTime;
                return Math.round(offset);
            },

            beatOffset() {
                return parseInt(this.firstNoteBeat) || 0;
            },

            isValidForDownload() {
                return this.fileName && this.content.length > 0;
            },

            isValidForPackage() {
                return this.fileName && this.content.length > 0 && this.uploadedFiles.txt;
            },

            mczFileName() {
                return (this.title || this.fileName || "converted_chart").replace(/[<>:"/\\|?*]/g, '_') + ".mcz";
            }
        },
        watch: {
            firstNoteBeat() {
                if (this.originalContent.length > 0) {
                    this.applyBeatOffset();
                }
            }
        },
        methods: {
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            },

            getFileExtension(filename) {
                if (!filename) return '';
                return filename.split('.').pop().toUpperCase();
            },

            uploadBackground(event) {
                const file = event.target.files[0];
                if (!file) return;

                this.backgroundFile = file;
                this.backgroundFileName = file.name;
                this.background = file.name;
                this.backgroundFileSize = this.formatFileSize(file.size);
                this.uploadedFiles.background = file;
            },

            uploadAudio(event) {
                const file = event.target.files[0];
                if (!file) return;

                this.audioFile = file;
                this.audioFileName = file.name;
                this.audioFileSize = this.formatFileSize(file.size);

                const nameWithoutExt = file.name.replace(/\.[^/.]+$/, "");
                this.sound = nameWithoutExt + (file.name.toLowerCase().endsWith('.mp3') ? '.ogg' :
                    file.name.toLowerCase().endsWith('.wav') ? '.ogg' :
                        file.name.toLowerCase().endsWith('.flac') ? '.ogg' : '');

                this.uploadedFiles.audio = file;

                if (this.content.length > 0 && !this.audioStartTime) {
                    this.audioStartTime = "1.0";
                }
            },

            uploadTxtFile(event) {
                const file = event.target.files[0];
                if (!file) return;

                this.txtFileSize = this.formatFileSize(file.size);

                const reader = new FileReader();
                this.fileName = file.name.split(".")[0];
                this.uploadedFiles.txt = file;

                if (!this.title) {
                    this.title = this.fileName;
                }

                reader.onload = (e) => {
                    try {
                        const lines = e.target.result.split('\n');
                        this.parseTxtContent(lines);
                    } catch (error) {
                        console.error("è¯»å–æ–‡ä»¶é”™è¯¯:", error);
                        alert("è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼");
                    }
                };
                reader.readAsText(file);
            },

            removeFile(fileType) {
                if (confirm(`ç¡®å®šè¦ç§»é™¤${this.getFileTypeName(fileType)}å—ï¼Ÿ`)) {
                    switch(fileType) {
                        case 'txt':
                            this.fileName = "";
                            this.txtFileSize = "";
                            this.uploadedFiles.txt = null;
                            this.content = [];
                            this.effectList = [];
                            this.originalContent = [];
                            this.originalEffectList = [];
                            break;
                        case 'audio':
                            this.audioFile = null;
                            this.audioFileName = "";
                            this.audioFileSize = "";
                            this.sound = "";
                            this.uploadedFiles.audio = null;
                            break;
                        case 'background':
                            this.backgroundFile = null;
                            this.backgroundFileName = "";
                            this.backgroundFileSize = "";
                            this.background = "";
                            this.uploadedFiles.background = null;
                            break;
                    }

                    const input = document.getElementById(`${fileType}-file-input`);
                    if (input) input.value = "";
                }
            },

            getFileTypeName(fileType) {
                const names = {
                    'txt': 'è°±é¢æ–‡ä»¶',
                    'audio': 'éŸ³é¢‘æ–‡ä»¶',
                    'background': 'èƒŒæ™¯å›¾ç‰‡'
                };
                return names[fileType] || 'æ–‡ä»¶';
            },

            parseTxtContent(lines) {
                this.content = [];
                this.effectList = [];
                this.originalContent = [];
                this.originalEffectList = [];
                this.originalBeats = [];

                lines.forEach((line, index) => {
                    line = line.trim();
                    if (line === "" || line.startsWith('//') || line.startsWith('#')) return;

                    line = line.replace('\r', '');

                    if (line.includes(",")) {
                        const effect = this.parseEffectLine(line, false);
                        if (effect) {
                            this.originalEffectList.push(effect);
                        }
                    } else {
                        const notes = this.parseNoteLine(line, false);
                        if (notes && notes.length > 0) {
                            this.originalContent.push(...notes);
                        }
                    }
                });

                console.log(`è§£æå®Œæˆ: ${this.originalContent.length} ä¸ªéŸ³ç¬¦`);
                this.applyBeatOffset();
            },

            parseNoteLine(line, applyOffset = false) {
                try {
                    const parts = line.split("-");
                    if (parts.length < 2) return [];

                    const columns = parts[0].split("").map(Number);
                    const validColumns = columns.filter(col => col >= 1 && col <= 6).map(col => col - 1);

                    if (validColumns.length === 0) return [];

                    const startTime = parseFloat(parts[1]);
                    if (isNaN(startTime)) return [];

                    const beat = this.calculateBeat(startTime);

                    return validColumns.map(column => {
                        const noteObject = {
                            beat: [...beat],
                            column: column
                        };

                        if (parts.length === 3) {
                            const endTime = parseFloat(parts[2]);
                            if (!isNaN(endTime)) {
                                noteObject.endbeat = this.calculateBeat(endTime);
                            }
                        }

                        if (applyOffset && this.beatOffset > 0) {
                            noteObject.beat[0] += this.beatOffset;
                            if (noteObject.endbeat) {
                                noteObject.endbeat[0] += this.beatOffset;
                            }
                        }

                        return noteObject;
                    });
                } catch (error) {
                    console.error("è§£æéŸ³ç¬¦è¡Œé”™è¯¯:", line, error);
                    return [];
                }
            },

            parseEffectLine(line, applyOffset = false) {
                try {
                    const parts = line.split(",");
                    if (parts.length < 2) return null;

                    const beatTime = parseFloat(parts[0]);
                    const scroll = parseFloat(parts[1]);

                    if (isNaN(beatTime) || isNaN(scroll)) return null;

                    const beat = this.calculateBeat(beatTime);

                    if (applyOffset && this.beatOffset > 0) {
                        beat[0] += this.beatOffset;
                    }

                    return {
                        beat: beat,
                        scroll: scroll
                    };
                } catch (error) {
                    console.error("è§£ææ•ˆæœè¡Œé”™è¯¯:", line, error);
                    return null;
                }
            },

            applyBeatOffset() {
                this.content = [];
                this.effectList = [];

                const offset = this.beatOffset;

                this.originalContent.forEach(originalNote => {
                    const note = {
                        beat: [...originalNote.beat],
                        column: originalNote.column
                    };

                    note.beat[0] += offset;

                    if (originalNote.endbeat) {
                        note.endbeat = [...originalNote.endbeat];
                        note.endbeat[0] += offset;
                    }

                    this.content.push(note);
                });

                this.originalEffectList.forEach(originalEffect => {
                    const effect = {
                        beat: [...originalEffect.beat],
                        scroll: originalEffect.scroll
                    };

                    effect.beat[0] += offset;

                    this.effectList.push(effect);
                });
            },

            calculateBeat(decimalTime) {
                const TICKS_PER_BEAT = 288;
                const totalTicks = Math.round(decimalTime * TICKS_PER_BEAT);
                const beats = Math.floor(totalTicks / TICKS_PER_BEAT);
                const remainingTicks = totalTicks % TICKS_PER_BEAT;

                if (remainingTicks === 0) {
                    return [beats, 0, 1];
                }

                return this.simplifyTicksFraction(beats, remainingTicks, TICKS_PER_BEAT);
            },

            simplifyTicksFraction(integer, numerator, denominator) {
                const gcd = (a, b) => {
                    while (b !== 0) {
                        let temp = b;
                        b = a % b;
                        a = temp;
                    }
                    return a;
                };

                let divisor = gcd(numerator, denominator);
                let simplifiedNumerator = numerator / divisor;
                let simplifiedDenominator = denominator / divisor;

                return [integer, simplifiedNumerator, simplifiedDenominator];
            },

            generateMcFile() {
                const finalNote = {
                    beat: [this.beatOffset, 0, 1],
                    sound: this.sound || "default.ogg",
                    vol: 100,
                    offset: this.calculatedOffset,
                    type: 1
                };

                this.mcData = {
                    meta: {
                        $ver: 0,
                        creator: this.creator || "Unknown",
                        background: this.background || "",
                        version: "",
                        id: 0,
                        mode: 0,
                        time: Math.floor(Date.now() / 1000),
                        song: {
                            title: this.title || this.fileName || "Unknown Title",
                            artist: this.artist || "Unknown Artist",
                            id: 0
                        },
                        mode_ext: {
                            column: 6,
                            bar_begin: 0
                        }
                    },
                    time: [{
                        beat: [0, 0, 1],
                        bpm: parseFloat(this.bpm) || 120
                    }],
                    effect: this.effectList,
                    note: [...this.content, finalNote],
                    extra: {
                        test: {
                            divide: 4,
                            speed: 100,
                            save: 0,
                            lock: 0,
                            edit_mode: 0
                        }
                    }
                };

                return JSON.stringify(this.mcData, null, 2);
            },

            downloadMcFile() {
                if (!this.isValidForDownload) {
                    alert("è¯·å…ˆä¸Šä¼ TXTè°±é¢æ–‡ä»¶ï¼");
                    return;
                }

                const mcContent = this.generateMcFile();
                const blob = new Blob([mcContent], { type: "application/json" });
                const a = document.createElement("a");

                let fileName = this.title || this.fileName || "converted_chart";
                fileName = fileName.replace(/[<>:"/\\|?*]/g, '_');

                a.href = URL.createObjectURL(blob);
                a.download = fileName + ".mc";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            },

            async packageMcFile() {
                if (!this.isValidForPackage) {
                    alert("è¯·å…ˆä¸Šä¼ TXTè°±é¢æ–‡ä»¶ï¼");
                    return;
                }

                if (!this.uploadedFiles.audio) {
                    if (!confirm("æ‚¨è¿˜æ²¡æœ‰ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ï¼Œå°†ä½¿ç”¨é»˜è®¤éŸ³é¢‘æ–‡ä»¶ã€‚æ˜¯å¦ç»§ç»­æ‰“åŒ…ï¼Ÿ")) {
                        return;
                    }
                }

                this.isPackaging = true;
                this.packagingProgress = 0;
                this.packagingStatus = "æ­£åœ¨åˆå§‹åŒ–æ‰“åŒ…...";

                try {
                    const zip = new JSZip();
                    const totalSteps = 3 + (this.uploadedFiles.audio ? 1 : 0) + (this.uploadedFiles.background ? 1 : 0);
                    let currentStep = 0;

                    this.packagingStatus = "ç”ŸæˆMCè°±é¢æ–‡ä»¶...";
                    this.packagingProgress = Math.round((++currentStep / totalSteps) * 100);

                    const mcContent = this.generateMcFile();
                    const mcFileName = (this.title || this.fileName || "converted_chart").replace(/[<>:"/\\|?*]/g, '_') + ".mc";
                    zip.file(mcFileName, mcContent);

                    this.packagingStatus = "æ·»åŠ TXTè°±é¢æ–‡ä»¶...";
                    this.packagingProgress = Math.round((++currentStep / totalSteps) * 100);

                    const txtFileContent = await this.readFileAsArrayBuffer(this.uploadedFiles.txt);
                    zip.file(this.fileName + ".txt", txtFileContent);

                    if (this.uploadedFiles.audio) {
                        this.packagingStatus = "æ·»åŠ éŸ³é¢‘æ–‡ä»¶...";
                        this.packagingProgress = Math.round((++currentStep / totalSteps) * 100);

                        const audioFileContent = await this.readFileAsArrayBuffer(this.uploadedFiles.audio);
                        zip.file(this.audioFileName, audioFileContent);
                    } else {
                        const defaultAudio = new ArrayBuffer(0);
                        zip.file("default.ogg", defaultAudio);
                        currentStep++;
                    }

                    if (this.uploadedFiles.background) {
                        this.packagingStatus = "æ·»åŠ èƒŒæ™¯å›¾ç‰‡...";
                        this.packagingProgress = Math.round((++currentStep / totalSteps) * 100);

                        const bgFileContent = await this.readFileAsArrayBuffer(this.uploadedFiles.background);
                        zip.file(this.backgroundFileName, bgFileContent);
                    }

                    this.packagingStatus = "æ­£åœ¨å‹ç¼©æ–‡ä»¶...";
                    this.packagingProgress = Math.round((++currentStep / totalSteps) * 100);

                    const content = await zip.generateAsync({
                        type: "blob",
                        compression: "DEFLATE",
                        compressionOptions: {
                            level: 6
                        }
                    });

                    this.packagingStatus = "æ­£åœ¨ä¿å­˜æ–‡ä»¶...";
                    this.packagingProgress = 100;

                    saveAs(content, this.mczFileName);

                    setTimeout(() => {
                        this.isPackaging = false;
                        this.packagingStatus = "æ‰“åŒ…å®Œæˆï¼";
                        alert(`MCZæ–‡ä»¶å·²æˆåŠŸç”Ÿæˆ: ${this.mczFileName}`);
                    }, 1000);

                } catch (error) {
                    console.error("æ‰“åŒ…å¤±è´¥:", error);
                    alert("æ‰“åŒ…å¤±è´¥: " + error.message);
                    this.isPackaging = false;
                }
            },

            readFileAsArrayBuffer(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.onerror = (e) => reject(new Error("æ–‡ä»¶è¯»å–å¤±è´¥"));
                    reader.readAsArrayBuffer(file);
                });
            },

            resetAll() {
                if (confirm("ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¾“å…¥å—ï¼Ÿ")) {
                    this.fileName = "";
                    this.txtFileSize = "";
                    this.bpm = "120";
                    this.creator = "";
                    this.background = "";
                    this.backgroundFile = null;
                    this.backgroundFileName = "";
                    this.backgroundFileSize = "";
                    this.audioStartTime = "0";
                    this.firstNoteBeat = "0";
                    this.sound = "";
                    this.audioFile = null;
                    this.audioFileName = "";
                    this.audioFileSize = "";
                    this.title = "";
                    this.artist = "Unknown";
                    this.content = [];
                    this.effectList = [];
                    this.originalContent = [];
                    this.originalEffectList = [];
                    this.originalBeats = [];
                    this.mcData = {};
                    this.uploadedFiles = {
                        background: null,
                        audio: null,
                        txt: null
                    };
                    this.isPackaging = false;
                    this.packagingProgress = 0;
                    this.packagingStatus = "";

                    const fileInputs = document.querySelectorAll('input[type="file"]');
                    fileInputs.forEach(input => input.value = "");
                }
            }
        }
    });
</script>
</body>
</html>